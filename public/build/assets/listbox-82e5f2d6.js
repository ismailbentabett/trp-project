import{L as Q,u as D,x as q,v as O,m as J,w as W,n as X,o as p,e as G,l as C,M as Y,E as Z,Q as _,D as ee,H as E,T as te,t as j,f as ae,p as le,g as K,s as oe,O as ie,i as v}from"./Toastr-4f97591a.js";import{p as ne}from"./Avatar-996ef94d.js";import{D as M,r as P,l as m,a0 as ue,E as N,I as z,K as U,F as re,X as se,w as de,J as B,a1 as ve,a8 as w}from"./app-be752e86.js";function pe(t,c){return t===c}var ce=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ce||{}),fe=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(fe||{}),be=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(be||{});function me(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let H=Symbol("ListboxContext");function A(t){let c=ve(H,null);if(c===null){let y=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(y,A),y}return c}let ye=M({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>pe},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:c,attrs:y,emit:S}){let e=P(1),s=P(null),f=P(null),b=P(null),d=P([]),a=P(""),l=P(null),h=P(1);function L(o=i=>i){let i=l.value!==null?d.value[l.value]:null,n=ie(o(d.value.slice()),g=>p(g.dataRef.domRef)),r=i?n.indexOf(i):null;return r===-1&&(r=null),{options:n,activeOptionIndex:r}}let R=m(()=>t.multiple?1:0),[T,I]=Q(m(()=>t.modelValue),o=>S("update:modelValue",o),m(()=>t.defaultValue)),k=m(()=>T.value===void 0?D(R.value,{1:[],0:void 0}):T.value),u={listboxState:e,value:k,mode:R,compare(o,i){if(typeof t.by=="string"){let n=t.by;return(o==null?void 0:o[n])===(i==null?void 0:i[n])}return t.by(o,i)},orientation:m(()=>t.horizontal?"horizontal":"vertical"),labelRef:s,buttonRef:f,optionsRef:b,disabled:m(()=>t.disabled),options:d,searchQuery:a,activeOptionIndex:l,activationTrigger:h,closeListbox(){t.disabled||e.value!==1&&(e.value=1,l.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(o,i,n){if(t.disabled||e.value===1)return;let r=L(),g=q(o===O.Specific?{focus:O.Specific,id:i}:{focus:o},{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:V=>V.id,resolveDisabled:V=>V.dataRef.disabled});a.value="",l.value=g,h.value=n??1,d.value=r.options},search(o){if(t.disabled||e.value===1)return;let i=a.value!==""?0:1;a.value+=o.toLowerCase();let n=(l.value!==null?d.value.slice(l.value+i).concat(d.value.slice(0,l.value+i)):d.value).find(g=>g.dataRef.textValue.startsWith(a.value)&&!g.dataRef.disabled),r=n?d.value.indexOf(n):-1;r===-1||r===l.value||(l.value=r,h.value=1)},clearSearch(){t.disabled||e.value!==1&&a.value!==""&&(a.value="")},registerOption(o,i){let n=L(r=>[...r,{id:o,dataRef:i}]);d.value=n.options,l.value=n.activeOptionIndex},unregisterOption(o){let i=L(n=>{let r=n.findIndex(g=>g.id===o);return r!==-1&&n.splice(r,1),n});d.value=i.options,l.value=i.activeOptionIndex,h.value=1},theirOnChange(o){t.disabled||I(o)},select(o){t.disabled||I(D(R.value,{0:()=>o,1:()=>{let i=w(u.value.value).slice(),n=w(o),r=i.findIndex(g=>u.compare(n,w(g)));return r===-1?i.push(n):i.splice(r,1),i}}))}};J([f,b],(o,i)=>{var n;u.closeListbox(),W(i,X.Loose)||(o.preventDefault(),(n=p(f))==null||n.focus())},m(()=>e.value===0)),ue(H,u),G(m(()=>D(e.value,{0:C.Open,1:C.Closed})));let x=m(()=>{var o;return(o=p(f))==null?void 0:o.closest("form")});return N(()=>{z([x],()=>{if(!x.value||t.defaultValue===void 0)return;function o(){u.theirOnChange(t.defaultValue)}return x.value.addEventListener("reset",o),()=>{var i;(i=x.value)==null||i.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:i,disabled:n,form:r,...g}=t,V={open:e.value===0,disabled:n,value:k.value};return U(re,[...o!=null&&k.value!=null?Y({[o]:k.value}).map(([F,$])=>U(Z,_({features:ee.Hidden,key:F,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:r,name:F,value:$}))):[],E({ourProps:{},theirProps:{...y,...te(g,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:V,slots:c,attrs:y,name:"Listbox"})])}}}),Se=M({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-listbox-label-${j()}`}},setup(t,{attrs:c,slots:y}){let S=A("ListboxLabel");function e(){var s;(s=p(S.buttonRef))==null||s.focus({preventScroll:!0})}return()=>{let s={open:S.listboxState.value===0,disabled:S.disabled.value},{id:f,...b}=t,d={id:f,ref:S.labelRef,onClick:e};return E({ourProps:d,theirProps:b,slot:s,attrs:c,slots:y,name:"ListboxLabel"})}}}),he=M({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${j()}`}},setup(t,{attrs:c,slots:y,expose:S}){let e=A("ListboxButton");S({el:e.buttonRef,$el:e.buttonRef});function s(a){switch(a.key){case v.Space:case v.Enter:case v.ArrowDown:a.preventDefault(),e.openListbox(),B(()=>{var l;(l=p(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(O.First)});break;case v.ArrowUp:a.preventDefault(),e.openListbox(),B(()=>{var l;(l=p(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(O.Last)});break}}function f(a){switch(a.key){case v.Space:a.preventDefault();break}}function b(a){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),B(()=>{var l;return(l=p(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})})):(a.preventDefault(),e.openListbox(),me(()=>{var l;return(l=p(e.optionsRef))==null?void 0:l.focus({preventScroll:!0})})))}let d=ae(m(()=>({as:t.as,type:c.type})),e.buttonRef);return()=>{var a,l;let h={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:L,...R}=t,T={ref:e.buttonRef,id:L,type:d.value,"aria-haspopup":"listbox","aria-controls":(a=p(e.optionsRef))==null?void 0:a.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(l=p(e.labelRef))==null?void 0:l.id,L].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:s,onKeyup:f,onClick:b};return E({ourProps:T,theirProps:R,slot:h,attrs:c,slots:y,name:"ListboxButton"})}}}),Le=M({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${j()}`}},setup(t,{attrs:c,slots:y,expose:S}){let e=A("ListboxOptions"),s=P(null);S({el:e.optionsRef,$el:e.optionsRef});function f(a){switch(s.value&&clearTimeout(s.value),a.key){case v.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case v.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeOptionIndex.value!==null){let l=e.options.value[e.activeOptionIndex.value];e.select(l.dataRef.value)}e.mode.value===0&&(e.closeListbox(),B(()=>{var l;return(l=p(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})}));break;case D(e.orientation.value,{vertical:v.ArrowDown,horizontal:v.ArrowRight}):return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Next);case D(e.orientation.value,{vertical:v.ArrowUp,horizontal:v.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Previous);case v.Home:case v.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToOption(O.First);case v.End:case v.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Last);case v.Escape:a.preventDefault(),a.stopPropagation(),e.closeListbox(),B(()=>{var l;return(l=p(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case v.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(e.search(a.key),s.value=setTimeout(()=>e.clearSearch(),350));break}}let b=le(),d=m(()=>b!==null?(b.value&C.Open)===C.Open:e.listboxState.value===0);return()=>{var a,l,h,L;let R={open:e.listboxState.value===0},{id:T,...I}=t,k={"aria-activedescendant":e.activeOptionIndex.value===null||(a=e.options.value[e.activeOptionIndex.value])==null?void 0:a.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(L=(l=p(e.labelRef))==null?void 0:l.id)!=null?L:(h=p(e.buttonRef))==null?void 0:h.id,"aria-orientation":e.orientation.value,id:T,onKeydown:f,role:"listbox",tabIndex:0,ref:e.optionsRef};return E({ourProps:k,theirProps:I,slot:R,attrs:c,slots:y,features:K.RenderStrategy|K.Static,visible:d.value,name:"ListboxOptions"})}}}),Re=M({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${j()}`}},setup(t,{slots:c,attrs:y,expose:S}){let e=A("ListboxOption"),s=P(null);S({el:s,$el:s});let f=m(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),b=m(()=>D(e.mode.value,{0:()=>e.compare(w(e.value.value),w(t.value)),1:()=>w(e.value.value).some(u=>e.compare(w(u),w(t.value)))})),d=m(()=>D(e.mode.value,{1:()=>{var u;let x=w(e.value.value);return((u=e.options.value.find(o=>x.some(i=>e.compare(w(i),w(o.dataRef.value)))))==null?void 0:u.id)===t.id},0:()=>b.value})),a=ne(s),l=m(()=>({disabled:t.disabled,value:t.value,get textValue(){return a()},domRef:s}));N(()=>e.registerOption(t.id,l)),se(()=>e.unregisterOption(t.id)),N(()=>{z([e.listboxState,b],()=>{e.listboxState.value===0&&b.value&&D(e.mode.value,{1:()=>{d.value&&e.goToOption(O.Specific,t.id)},0:()=>{e.goToOption(O.Specific,t.id)}})},{immediate:!0})}),de(()=>{e.listboxState.value===0&&f.value&&e.activationTrigger.value!==0&&B(()=>{var u,x;return(x=(u=p(s))==null?void 0:u.scrollIntoView)==null?void 0:x.call(u,{block:"nearest"})})});function h(u){if(t.disabled)return u.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),B(()=>{var x;return(x=p(e.buttonRef))==null?void 0:x.focus({preventScroll:!0})}))}function L(){if(t.disabled)return e.goToOption(O.Nothing);e.goToOption(O.Specific,t.id)}let R=oe();function T(u){R.update(u)}function I(u){R.wasMoved(u)&&(t.disabled||f.value||e.goToOption(O.Specific,t.id,0))}function k(u){R.wasMoved(u)&&(t.disabled||f.value&&e.goToOption(O.Nothing))}return()=>{let{disabled:u}=t,x={active:f.value,selected:b.value,disabled:u},{id:o,value:i,disabled:n,...r}=t,g={id:o,ref:s,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":b.value,disabled:void 0,onClick:h,onFocus:L,onPointerenter:T,onMouseenter:T,onPointermove:I,onMousemove:I,onPointerleave:k,onMouseleave:k};return E({ourProps:g,theirProps:r,slot:x,attrs:y,slots:c,name:"ListboxOption"})}}});export{ye as B,Le as H,Se as K,he as N,Re as U};

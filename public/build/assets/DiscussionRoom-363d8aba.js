import{o as a,e as n,b as e,Q as U,l as f,r as V,L as Z,E as ee,w as te,c as h,a as w,d as c,u as r,F as u,f as _,n as k,t as s,j as d,h as m,x as se,g as ae,y as ie}from"./app-be752e86.js";import{r as g,_ as ne}from"./TicketsLayout-768272b1.js";import{_ as L}from"./Avatar-996ef94d.js";import{h as re}from"./moment-fbc5633a.js";import{u as oe,r as le}from"./index-c4968f68.js";import{Q as de,G as ce,X as ue,Y as me,J as he}from"./CommandPalette-97a0a532.js";import{r as fe,a as xe}from"./ChevronUpDownIcon-6b7a2e87.js";import{r as T}from"./ArrowPathIcon-920edc65.js";import{r as $}from"./LockClosedIcon-5c2619d4.js";import"./AuthenticatedLayout-16295b11.js";import"./Toastr-4f97591a.js";import"./CartStore-76e4ad5a.js";function E(i,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4H5V2.75A.75.75 0 015.75 2zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75z","clip-rule":"evenodd"})])}function M(i,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 2c-2.236 0-4.43.18-6.57.524C1.993 2.755 1 4.014 1 5.426v5.148c0 1.413.993 2.67 2.43 2.902.848.137 1.705.248 2.57.331v3.443a.75.75 0 001.28.53l3.58-3.579a.78.78 0 01.527-.224 41.202 41.202 0 005.183-.5c1.437-.232 2.43-1.49 2.43-2.903V5.426c0-1.413-.993-2.67-2.43-2.902A41.289 41.289 0 0010 2zm0 7a1 1 0 100-2 1 1 0 000 2zM8 8a1 1 0 11-2 0 1 1 0 012 0zm5 1a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])}function ge(i,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M16.403 12.652a3 3 0 000-5.304 3 3 0 00-3.75-3.751 3 3 0 00-5.305 0 3 3 0 00-3.751 3.75 3 3 0 000 5.305 3 3 0 003.75 3.751 3 3 0 005.305 0 3 3 0 003.751-3.75zm-2.546-4.46a.75.75 0 00-1.214-.883l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"})])}function _e(i,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])}const ve={key:0,class:"bg-white shadow sm:rounded-lg"},ye={class:"px-4 py-5 sm:p-6"},pe=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Assigner un utilisateur",-1),be={class:"flex flex-1 w-full items-center justify-center flex-wrap space-y-1"},we={class:"relative mt-1"},ke={class:"flex items-center"},je=["src"],Ce={class:"py-8 xl:py-10"},$e={class:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 xl:grid xl:max-w-5xl xl:grid-cols-3"},Me={class:"xl:col-span-2 xl:border-r xl:border-gray-200 xl:pr-8"},Ae={class:"md:flex md:items-center md:justify-between md:space-x-4 xl:border-b xl:pb-6"},Be={class:"text-2xl font-bold text-gray-900"},Ve={class:"mt-2 text-sm text-gray-500"},qe={class:"font-medium text-gray-900"},ze={class:"mt-4 flex flex-wrap justify-center items-center md:space-x-3 md:mt-0 text-white"},De=e("span",null,"Fermer comme résolu",-1),Ue=e("span",null,"Fermer comme non résolu",-1),Le=e("span",null,"Rouvrir comme non résolu",-1),Te=e("span",null,"Rouvrir",-1),Ee={class:"mt-8 xl:hidden"},Se=e("h2",{class:"sr-only"},"Détails",-1),He={class:"space-y-5"},Re={class:"flex items-center space-x-2"},Ye={class:"flex items-center space-x-2"},Je={class:"text-sm font-medium text-gray-900"},Ne={class:"flex items-center space-x-2"},Oe={class:"text-sm font-medium text-gray-900"},Pe={datetime:"2020-12-02"},Qe={class:"mt-6 space-y-8 border-t border-b border-gray-200 py-6"},Fe=e("h2",{class:"text-sm font-medium text-gray-500"},"Bénéficiaire",-1),We={key:0,role:"list",class:"mt-3 space-y-3"},Ge={class:"flex justify-start"},Xe={class:"flex items-center space-x-3"},Ke={class:"flex-shrink-0"},Ie=["src"],Ze=["src"],et={class:"text-sm font-medium text-gray-900"},tt=e("div",null,[e("h2",{class:"text-sm font-medium text-gray-500"},"Étiquettes"),e("ul",{role:"list",class:"mt-2 leading-8"},[e("li",{class:"inline"},[e("a",{href:"#",class:"relative inline-flex items-center rounded-full border border-gray-300 px-3 py-0.5"},[e("div",{class:"absolute flex flex-shrink-0 items-center justify-center"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-cerulean-500","aria-hidden":"true"})]),e("div",{class:"ml-3.5 text-sm font-medium text-gray-900"},"Bug")]),m(" "+s(" "))]),e("li",{class:"inline"},[e("a",{href:"#",class:"relative inline-flex items-center rounded-full border border-gray-300 px-3 py-0.5"},[e("div",{class:"absolute flex flex-shrink-0 items-center justify-center"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-cerulean-500","aria-hidden":"true"})]),e("div",{class:"ml-3.5 text-sm font-medium text-gray-900"}," Accessibilité ")]),m(" "+s(" "))])])],-1),st={class:"py-3 xl:pt-6 xl:pb-0"},at=e("h2",{class:"sr-only"},"Description",-1),it={class:"pcerulean max-w-none"},nt={class:"prose max-w-none"},rt={"aria-labelledby":"activity-title",class:"mt-8 xl:mt-10"},ot={class:"divide-y divide-gray-200"},lt=e("div",{class:"pb-4"},[e("h2",{id:"activity-title",class:"text-lg font-medium text-gray-900"}," Discussions & Activité ")],-1),dt={class:"pt-6"},ct={class:"flow-root"},ut={role:"list",class:"-mb-8"},mt={class:"relative pb-8"},ht={key:0,class:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"},ft={class:"relative flex items-start space-x-3"},xt={class:"relative"},gt={class:"absolute -bottom-0.5 -right-1 rounded-tl bg-white px-0.5 py-px"},_t={class:"min-w-0 flex-1"},vt={class:"text-sm"},yt={href:"#",class:"font-medium text-gray-900"},pt={class:"mt-0.5 text-sm text-gray-500"},bt={class:"text-xs font-xs text-gray-500"},wt={datetime:"2020-12-02"},kt={class:"relative px-1"},jt={class:"flex h-8 w-8 items-center justify-center rounded-full"},Ct={class:"min-w-0 flex-1 py-1.5"},$t={class:"text-sm text-gray-500"},Mt={class:"font-medium text-gray-900"},At={class:"whitespace-nowrap"},Bt={class:"relative px-1"},Vt={class:"flex h-8 w-8 items-center justify-center rounded-full"},qt={class:"min-w-0 flex-1 py-1.5"},zt={class:"text-sm text-gray-500"},Dt={class:"font-medium text-gray-900"},Ut={class:"whitespace-nowrap"},Lt={class:"relative px-1"},Tt={class:"flex h-8 w-8 items-center justify-center rounded-full"},Et={class:"min-w-0 flex-1 py-1.5"},St={class:"text-sm text-gray-500"},Ht={class:"font-medium text-gray-900"},Rt={class:"whitespace-nowrap"},Yt={class:"relative px-1"},Jt={class:"flex h-8 w-8 items-center justify-center rounded-full"},Nt={class:"min-w-0 flex-1 py-1.5"},Ot={class:"text-sm text-gray-500"},Pt={class:"font-medium text-gray-900"},Qt={class:"whitespace-nowrap"},Ft={class:"mt-6"},Wt={class:"flex space-x-3"},Gt={class:"flex-shrink-0"},Xt={class:"relative"},Kt={class:"absolute -bottom-0.5 -right-1 rounded-tl bg-white px-0.5 py-px"},It={class:"min-w-0 flex-1"},Zt=["onSubmit"],es=e("label",{for:"comment",class:"sr-only"},"Commentaire",-1),ts=e("div",{class:"mt-6 flex items-center justify-end space-x-4"},[e("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-cerulean-900 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-black focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"}," soumettre un commentaire ")],-1),ss={class:"hidden xl:block xl:pl-8"},as=e("h2",{class:"sr-only"},"Détails",-1),is={class:"space-y-5"},ns={class:"flex items-end space-x-2"},rs={class:"flex items-center space-x-2"},os={class:"text-sm font-medium text-gray-900"},ls={class:"flex items-center space-x-2"},ds={class:"text-sm font-medium text-gray-900"},cs={datetime:"2020-12-02"},us={class:"mt-6 space-y-8 border-t border-gray-200 py-6"},ms=e("h2",{class:"text-sm font-medium text-gray-500"},"Bénéficiaire",-1),hs={key:0,role:"list",class:"mt-3 space-y-3"},fs={class:"flex justify-start"},xs={class:"flex items-center space-x-3"},gs={class:"flex-shrink-0"},_s=["src"],vs=["src"],ys={class:"text-sm font-medium text-gray-900"},ps=e("h2",{class:"text-sm font-medium text-gray-500"},"Catégories",-1),bs={role:"list",class:"mt-2 leading-8"},ws={href:"",class:"relative inline-flex items-center rounded-full border border-gray-300 px-3 py-0.5 text-sm"},ks=e("span",{class:"absolute flex flex-shrink-0 items-center justify-center"},[e("span",{class:"bg-red-500 h-1.5 w-1.5 rounded-full","aria-hidden":"true"})],-1),js={class:"ml-3.5 font-medium text-gray-900"},Cs=e("h2",{class:"text-sm font-medium text-gray-500"},"Labels",-1),$s={role:"list",class:"mt-2 leading-8"},Ms={href:"",class:"relative inline-flex items-center rounded-full border border-gray-300 px-3 py-0.5 text-sm"},As=e("span",{class:"absolute flex flex-shrink-0 items-center justify-center"},[e("span",{class:"bg-blue-500 h-1.5 w-1.5 rounded-full","aria-hidden":"true"})],-1),Bs={class:"ml-3.5 font-medium text-gray-900"},Vs=e("h2",{class:"text-sm font-medium text-gray-500"},"Produits",-1),qs={role:"list",class:"mt-2 leading-8"},zs=["href"],Ds=e("span",{class:"absolute flex flex-shrink-0 items-center justify-center"},[e("span",{class:"bg-green-500 h-1.5 w-1.5 rounded-full","aria-hidden":"true"})],-1),Us={class:"ml-3.5 font-medium text-gray-900"},Ls=e("h2",{class:"text-sm font-medium text-gray-500"},"Accessoires",-1),Ts={role:"list",class:"mt-2 leading-8"},Es=["href"],Ss=e("span",{class:"absolute flex flex-shrink-0 items-center justify-center"},[e("span",{class:"bg-yellow-500 h-1.5 w-1.5 rounded-full","aria-hidden":"true"})],-1),Hs={class:"ml-3.5 font-medium text-gray-900"},Rs=e("h2",{class:"text-sm font-medium text-gray-500"},"Commandes",-1),Ys={role:"list",class:"mt-2 leading-8"},Js=["href"],Ns=e("span",{class:"absolute flex flex-shrink-0 items-center justify-center"},[e("span",{class:"bg-cerulean-500 h-1.5 w-1.5 rounded-full","aria-hidden":"true"})],-1),Os={class:"ml-3.5 font-medium text-gray-900"},aa={__name:"DiscussionRoom",props:{ticket:{type:Array,required:!0},openUser:{type:Object,required:!0},tracking:{type:Object,required:!0},admins:{type:Array,required:!0},assignedtouser:{type:Object,required:!0}},setup(i){const y=U(),S=f(()=>y.props.auth.user),l=i,H=[{id:1,type:"comment",person:{name:"Eduardo Benz",href:"#"},imageUrl:"https://images.unsplash.com/photo-1520785643438-5bf77931f493?ixlib=rb-=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=8&w=256&h=256&q=80",comment:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Tincidunt nunc ipsum tempor purus vitae id. Morbi in vestibulum nec varius. Et diam cursus quis sed purus nam. ",date:"6d ago"},{id:2,type:"assignment",person:{name:"Hilary Mahy",href:"#"},assigned:{name:"Kristin Watson",href:"#"},date:"2d ago"},{id:3,type:"tags",person:{name:"Hilary Mahy",href:"#"},tags:[{name:"Bug",href:"#",color:"bg-cerulean-500"},{name:"Accessibility",href:"#",color:"bg-cerulean-500"}],date:"6h ago"},{id:4,type:"comment",person:{name:"Jason Meyers",href:"#"},imageUrl:"https://images.unsplash.com/photo-1531427186611-ecfd6d936c79?ixlib=rb-=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=8&w=256&h=256&q=80",comment:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Tincidunt nunc ipsum tempor purus vitae id. Morbi in vestibulum nec varius. Et diam cursus quis sed purus nam. Scelerisque amet elit non sit ut tincidunt condimentum. Nisl ultrices eu venenatis diam.",date:"2h ago"}];V(!1);const A=o=>{if(o)return re(String(o)).format("YYYY - MM - DD")},v=()=>{window.location.reload()},R=()=>{axios.post("/tickets/close-as-resolved",{ticket_id:l.ticket.id}).then(o=>{v()})},Y=()=>{axios.post("/tickets/close-as-unresolved",{ticket_id:l.ticket.id}).then(o=>{v()})},J=()=>{axios.post("/tickets/reopen",{ticket_id:l.ticket.id}).then(o=>{v()})},N=()=>{axios.post("/tickets/reopen-as-unresolved",{ticket_id:l.ticket.id}).then(o=>{v()})};let j=Z({message:""});const O=f(()=>({message:{required:le}})),P=oe(O,j);ee(()=>{P.value.$touch()});const Q=()=>{axios.post("/tickets/message",{ticket_id:l.ticket.id,message:j.message}).then(o=>{v()})},F=l.tracking.map(o=>({id:o.id,type:o.status,person:o.user,date:o.created_at,comment:o.comment_id?o.comment.message:null,created_at:A(o.created_at)})),B=V(""),p=V(null);te(()=>{p.value=l.assignedtouser?{id:l.assignedtouser.id,name:l.assignedtouser.name,imageUrl:l.assignedtouser.avatar?l.assignedtouser.avatar:`https://api.dicebear.com/7.x/initials/svg?seed=${l.assignedtouser.name}`}:null});const q=f(()=>B.value===""?z:z.filter(o=>o.name.toLowerCase().includes(B.value.toLowerCase()))),W=()=>{p.value!==null&&axios.post("/tickets/assign",{ticket_id:l.ticket.id,user_id:p.value.id}).then(o=>{v()})},z=l.admins.map(o=>({id:o.id,name:o.name,imageUrl:o.avatar?o.avatar:`https://api.dicebear.com/7.x/initials/svg?seed=${o.name}`})),G=U().props,b=f(()=>G.auth);f(()=>b.value.is_user);const X=f(()=>b.value.is_admin),K=f(()=>b.value.is_editor),I=f(()=>b.value.is_super_admin);return f(()=>b.value.is_customer),(o,x)=>(a(),h(ne,null,{default:w(()=>[X.value||I.value||K.value?(a(),n("div",ve,[e("div",ye,[pe,e("div",be,[c(r(he),{as:"div",class:"flex-1 w-full",modelValue:p.value,"onUpdate:modelValue":x[1]||(x[1]=t=>p.value=t)},{default:w(()=>[e("div",we,[c(r(de),{class:"w-full rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 shadow-sm focus:border-cerulean-500 focus:outline-none focus:ring-1 focus:ring-cerulean-500 sm:text-sm",onChange:x[0]||(x[0]=t=>B.value=t.target.value),"display-value":t=>t==null?void 0:t.name},null,8,["display-value"]),c(r(ce),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:w(()=>[c(r(fe),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1}),q.value.length>0?(a(),h(r(ue),{key:0,class:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:w(()=>[(a(!0),n(u,null,_(q.value,t=>(a(),h(r(me),{key:t.id,value:t,as:"template"},{default:w(({active:C,selected:D})=>[e("li",{class:k(["relative cursor-default select-none py-2 pl-3 pr-9",C?"bg-cerulean-600 text-white":"text-gray-900"])},[e("div",ke,[e("img",{src:t.imageUrl,alt:"",class:"h-6 w-6 flex-shrink-0 rounded-full"},null,8,je),e("span",{class:k(["ml-3 truncate",D&&"font-semibold"])},s(t.name),3)]),D?(a(),n("span",{key:0,class:k(["absolute inset-y-0 right-0 flex items-center pr-4",C?"text-white":"text-cerulean-600"])},[c(r(xe),{class:"h-5 w-5","aria-hidden":"true"})],2)):d("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):d("",!0)])]),_:1},8,["modelValue"]),e("button",{onClick:x[2]||(x[2]=t=>W()),class:"inline-flex w-full items-center justify-center rounded-md border border-transparent bg-cerulean-600 px-4 py-2 font-medium text-white shadow-sm hover:bg-cerulean-700 focus:outline-none focus:ring-2 focus:ring-cerulean-500 focus:ring-offset-2 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Assign ")])])])):d("",!0),e("div",Ce,[e("div",$e,[e("div",Me,[e("div",null,[e("div",null,[e("div",Ae,[e("div",null,[e("h1",Be,s(i.ticket.title),1),e("p",Ve,[m(" #"+s(String(i.ticket.id).padStart(2,"00"))+" ouvert par "+s(" ")+" ",1),e("a",qe,s(i.openUser.name),1),m(" "+s(" "))])]),e("div",ze,[i.ticket.status==="open"?(a(),n("button",{key:0,type:"button",onClick:R,class:"w-full md:w-auto inline-flex justify-center rounded-md border border-gray-300 bg-green-500 px-4 py-2 text-sm font-medium shadow-sm hover:text-gray-500 hover:bg-green-400 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[c(r(ge),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),De])):d("",!0),i.ticket.status==="open"?(a(),n("button",{key:1,type:"button",onClick:Y,class:"w-full md:w-auto mt-3 md:mt-0 inline-flex justify-center rounded-md border border-gray-300 bg-red-500 px-4 py-2 text-sm font-medium shadow-sm hover:text-gray-500 hover:bg-red-400 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[c(r(_e),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),Ue])):d("",!0),i.ticket.status==="closed"?(a(),n("button",{key:2,type:"button",onClick:N,class:"w-full md:w-auto mt-3 md:mt-0 inline-flex justify-center rounded-md border border-gray-300 bg-red-500 px-4 py-2 text-sm font-medium shadow-sm hover:text-gray-500 hover:bg-red-400 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[c(r(T),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),Le])):d("",!0),i.ticket.status==="closed"?(a(),n("button",{key:3,type:"button",onClick:J,class:"w-full md:w-auto mt-3 md:mt-0 inline-flex justify-center rounded-md border border-gray-300 bg-cerulean-500 px-4 py-2 text-sm font-medium shadow-sm hover:text-gray-500 hover:bg-cerulean-400 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[c(r(T),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),Te])):d("",!0)])]),e("aside",Ee,[Se,e("div",He,[e("div",Re,[i.ticket.is_resolved&&i.ticket.status==="open"?(a(),h(r(g),{key:0,class:"h-5 w-5 text-green-500","aria-hidden":"true"})):d("",!0),i.ticket.is_resolved==!1&&i.ticket.status==="open"?(a(),h(r(g),{key:1,class:"h-5 w-5 text-red-500","aria-hidden":"true"})):d("",!0),i.ticket.is_resolved&&i.ticket.status==="closed"?(a(),h(r($),{key:2,class:"h-5 w-5 text-green-500","aria-hidden":"true"})):d("",!0),i.ticket.is_resolved==!1&&i.ticket.status==="closed"?(a(),h(r($),{key:3,class:"h-5 w-5 text-red-500","aria-hidden":"true"})):d("",!0),e("span",{class:k([i.ticket.is_resolved?"text-green-500":"text-red-500","text-sm font-medium"])},s(i.ticket.status)+" & "+s(i.ticket.is_resolved?"Resolved":"Unresolved"),3)]),e("div",Ye,[c(r(M),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"}),e("span",Je,s(i.ticket.messages.length)+" commentaires",1)]),e("div",Ne,[c(r(E),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"}),e("span",Oe,[m("Créé le"),e("time",Pe,s(" ")+s(A(i.ticket.created_at)),1)])])]),e("div",Qe,[e("div",null,[Fe,l.assignedtouser?(a(),n("ul",We,[e("li",Ge,[e("div",Xe,[e("div",Ke,[l.assignedtouser.avatar?(a(),n("img",{key:0,class:"h-5 w-5 rounded-full",src:l.assignedtouser.avatar,alt:""},null,8,Ie)):(a(),n("img",{key:1,class:"h-5 w-5 rounded-full",src:`https://api.dicebear.com/7.x/initials/svg?seed=${l.assignedtouser.name}`,alt:""},null,8,Ze))]),e("div",et,s(l.assignedtouser.name),1)])])])):d("",!0)]),tt])]),e("div",st,[at,e("div",it,[e("div",nt,[e("p",null,s(i.ticket.message),1)])])])])]),e("section",rt,[e("div",null,[e("div",ot,[lt,e("div",dt,[e("div",ct,[e("ul",ut,[(a(!0),n(u,null,_(r(F),(t,C)=>(a(),n("li",{key:t.id},[e("div",mt,[C!==H.length-1?(a(),n("span",ht)):d("",!0),e("div",ft,[t.type==="message-sent"?(a(),n(u,{key:0},[e("div",xt,[c(L,{user:t.person,class:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-400 ring-8 ring-white"},null,8,["user"]),e("span",gt,[c(r(M),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),e("div",_t,[e("div",null,[e("div",vt,[e("a",yt,s(t.person.name),1)]),e("p",pt,s(t.comment),1)]),e("span",bt,[e("time",wt,s(" ")+s(t.created_at),1)])])],64)):d("",!0),t.type==="reopened-as-unresolved"?(a(),n(u,{key:1},[e("div",null,[e("div",kt,[e("div",jt,[c(r(g),{class:"h-5 w-5 text-red-500","aria-hidden":"true"})])])]),e("div",Ct,[e("div",$t,[e("a",Mt,s(t.person.name),1),m(" "+s(" ")+" Réouvert comme non résolu "+s(" ")+" "),e("span",At,s(t.created_at),1)])])],64)):d("",!0),t.type==="reopened"?(a(),n(u,{key:2},[e("div",null,[e("div",Bt,[e("div",Vt,[c(r(g),{class:"h-5 w-5 text-green-500","aria-hidden":"true"})])])]),e("div",qt,[e("div",zt,[e("a",Dt,s(t.person.name),1),m(" "+s(" ")+" Réouvert "+s(" ")+" "),e("span",Ut,s(t.created_at),1)])])],64)):d("",!0),t.type==="closed-as-resolved"?(a(),n(u,{key:3},[e("div",null,[e("div",Lt,[e("div",Tt,[c(r($),{class:"h-5 w-5 text-green-500","aria-hidden":"true"})])])]),e("div",Et,[e("div",St,[e("a",Ht,s(t.person.name),1),m(" "+s(" ")+" Classé comme résolu "+s(" ")+" "),e("span",Rt,s(t.created_at),1)])])],64)):d("",!0),t.type==="closed-as-unresolved"?(a(),n(u,{key:4},[e("div",null,[e("div",Yt,[e("div",Jt,[c(r($),{class:"h-5 w-5 text-red-500","aria-hidden":"true"})])])]),e("div",Nt,[e("div",Ot,[e("a",Pt,s(t.person.name),1),m(" "+s(" ")+" Classé comme non résolu "+s(" ")+" "),e("span",Qt,s(t.created_at),1)])])],64)):d("",!0)])])]))),128))])]),e("div",Ft,[e("div",Wt,[e("div",Gt,[e("div",Xt,[c(L,{user:S.value,class:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-400 ring-8 ring-white"},null,8,["user"]),e("span",Kt,[c(r(M),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])])]),e("div",It,[e("form",{onSubmit:se(Q,["prevent"])},[e("div",null,[es,ae(e("textarea",{id:"comment",name:"comment",rows:"3","onUpdate:modelValue":x[3]||(x[3]=t=>r(j).message=t),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-900 focus:ring-gray-900 sm:text-sm",placeholder:"Leave a comment"},null,512),[[ie,r(j).message]])]),ts],40,Zt)])])])])])])])]),e("aside",ss,[as,e("div",is,[e("div",ns,[i.ticket.is_resolved&&i.ticket.status==="open"?(a(),h(r(g),{key:0,class:"h-5 w-5 text-green-500","aria-hidden":"true"})):d("",!0),i.ticket.is_resolved==!1&&i.ticket.status==="open"?(a(),h(r(g),{key:1,class:"h-5 w-5 text-red-500","aria-hidden":"true"})):d("",!0),i.ticket.is_resolved&&i.ticket.status==="closed"?(a(),h(r(g),{key:2,class:"h-5 w-5 text-green-500","aria-hidden":"true"})):d("",!0),i.ticket.is_resolved==!1&&i.ticket.status==="closed"?(a(),h(r(g),{key:3,class:"h-5 w-5 text-red-500","aria-hidden":"true"})):d("",!0),e("span",{class:k([i.ticket.is_resolved&&i.ticket.status==="open"?"text-green-500":"text-red-500","text-sm font-medium"])},s(i.ticket.status)+" Ticket",3)]),e("div",rs,[c(r(M),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"}),e("span",os,s(i.ticket.messages.length)+" commentaires",1)]),e("div",ls,[c(r(E),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"}),e("span",ds,[m("Créé le "),e("time",cs,s(" ")+s(A(i.ticket.created_at)),1)])])]),e("div",us,[e("div",null,[ms,l.assignedtouser?(a(),n("ul",hs,[e("li",fs,[e("div",xs,[e("div",gs,[l.assignedtouser.avatar?(a(),n("img",{key:0,class:"h-5 w-5 rounded-full",src:l.assignedtouser.avatar,alt:""},null,8,_s)):(a(),n("img",{key:1,class:"h-5 w-5 rounded-full",src:`https://api.dicebear.com/7.x/initials/svg?seed=${l.assignedtouser.name}`,alt:""},null,8,vs))]),e("div",ys,s(l.assignedtouser.name),1)])])])):d("",!0)]),e("div",null,[ps,e("ul",bs,[(a(!0),n(u,null,_(i.ticket.categories,t=>(a(),n(u,{key:t.id},[e("a",ws,[ks,e("span",js,s(t.name),1)]),m(" "+s(" "))],64))),128))])]),e("div",null,[Cs,e("ul",$s,[(a(!0),n(u,null,_(i.ticket.labels,t=>(a(),n(u,{key:t.id},[e("a",Ms,[As,e("span",Bs,s(t.name),1)]),m(" "+s(" "))],64))),128))])]),e("div",null,[Vs,e("ul",qs,[(a(!0),n(u,null,_(i.ticket.products,t=>(a(),n(u,{key:t.id},[e("a",{href:`product/${t.id}`,class:"relative inline-flex items-center rounded-full border border-gray-300 px-3 py-0.5 text-sm"},[Ds,e("span",Us,s(t.name),1)],8,zs),m(" "+s(" "))],64))),128))])]),e("div",null,[Ls,e("ul",Ts,[(a(!0),n(u,null,_(i.ticket.accessories,t=>(a(),n(u,{key:t.id},[e("a",{href:`accessory/${t.id}`,class:"relative inline-flex items-center rounded-full border border-gray-300 px-3 py-0.5 text-sm"},[Ss,e("span",Hs,s(t.name),1)],8,Es),m(" "+s(" "))],64))),128))])]),e("div",null,[Rs,e("ul",Ys,[(a(!0),n(u,null,_(i.ticket.orders,t=>(a(),n(u,{key:t.id},[e("a",{href:`/admin/orders/${t.id}/edit`,class:"relative inline-flex items-center rounded-full border border-gray-300 px-3 py-0.5 text-sm"},[Ns,e("span",Os,"#00"+s(t.id),1)],8,Js),m(" "+s(" "))],64))),128))])])])])])])]),_:1}))}};export{aa as default};
